# Generator Refactoring Documentation

## Changes Made

### 1. Separated Request Bodies and Responses Processing

The generator now separates the processing of request bodies and responses:

- **Views**: Generated only for GET responses
- **List Components**: Generated only for GET responses
- **Create Forms**: Generated only for POST request bodies
- **Edit Forms**: Generated only for PUT/PATCH request bodies
- **Types**: Generated for all entities for comprehensive type coverage
- **Schemas**: Generated for validation of all types

### 2. Command Structure Refactoring

Each generator command now only executes its specific generator:

- `types`: Only generates TypeScript types
- `schemas`: Only generates Zod schemas
- `services`: Only generates API service classes
- `views`: Only generates view models (from GET responses only)
- `components`: Only generates React components
  - List components (for GET responses)
  - Create forms (for POST request bodies)
  - Edit forms (for PUT/PATCH request bodies)
- `hooks`: Only generates React Query hooks
- `mocks`: Only generates API mock services
- `fakes-data`: Only generates fake data generators

The `all` command now calls each individual generator function with the appropriate options.

### 3. File Organization

- **Components**:
  - Components are organized by type:
    - `/forms/create/` - Contains create forms (POST)
    - `/forms/edit/` - Contains edit forms (PUT/PATCH)
    - `/lists/` - Contains list components (GET)

### 4. Output Improvements

- Improved summary output showing:
  - Number of files generated by category
  - Which HTTP methods they correspond to
  - Clear distinction between response-related and request-related artifacts

## How It Works

### Generator Functions Structure

Each generator function now:
1. Accepts specific options
2. Creates a clean options object with only its specific generator flag set to true
3. Loads the OpenAPI spec
4. Initializes the appropriate generator
5. Generates the output
6. Saves the files
7. Displays a summary of what was generated

Example:
```typescript
async function generateViews(options: GeneratorOptions) {
  // ...setup...
  
  // Create a clean options object with only views set to true
  const cleanOptions: GeneratorOptions = {
    ...options,
    types: false,
    schemas: false,
    services: false,
    views: true,
    hooks: false,
    components: false,
    mocks: false,
    fakesData: false
  };
  
  // ...generate and save files...
  
  console.log(`âœ“ Generated ${generated.size} view models (for GET responses only)`);
}
```

### OpenAPI Processing

Each generator now analyzes the OpenAPI specification and only processes the relevant parts:

1. **ViewsGenerator**: Only processes GET response schemas
2. **ComponentsGenerator**:
   - Processes GET responses for list components
   - Processes POST request bodies for create forms
   - Processes PUT/PATCH request bodies for edit forms

### The "all" Command

The `all` command now calls each individual generator function in sequence:

```typescript
await generateTypes({...allOptions, spec: specPath, outDir: outputPath});
await generateSchemas({...allOptions, spec: specPath, outDir: outputPath});
await generateServices({...allOptions, spec: specPath, outDir: outputPath});
await generateViews({...allOptions, spec: specPath, outDir: outputPath});
// etc.
```

This ensures that each generator only does what it's supposed to do, even when called from the "all" command.
